application:
  title: Photosharing
  meta_title: Example application
  meta_description: Meteor Kitchen - example application
  theme: bootswatch-paper
  collections:
    - name: notes
      before_insert_code: "doc.name = Meteor.user() ? Meteor.user().profile.name : 'Anonymous'; return doc;"
      owner_field: createdBy
      roles_allowed_to_read: []
      roles_allowed_to_insert: []
      roles_allowed_to_update:
        - owner
      roles_allowed_to_delete:
        - owner
  free_zone:
    pages:
      - name: home_free
        text: '<h5>Hey developer, programming all day (and night) long?</h5><h4>Show us your tired face! :)</h4>'
        components:
          - name: photo_button
            html: >
              <template name="TEMPLATE_NAME">

                <p style="margin: 20px 0;">

                  <button type="button" id="take-photo" class="btn btn-danger">

                    <span class="fa fa-camera"></span>

                    Take a photo and share it!

                  </button>

                </p>

              </template>
            js: "var cameraOptions = {\n  width: 800,\n  height: 600\n};\n\n\nTemplate.TEMPLATE_NAME.events({\n  \"click #take-photo\": function(e, t) {\n    MeteorCamera.getPicture(cameraOptions, function (error, data) {\n      Session.set(\"photo\", data);\n      if (error) {\n        // e.g. camera permission denied, or unsupported browser (Safari on iOS, looking at you)\n        console.log(error);\n      } else {\n        Notes.insert({\n          photo: data\n        });\n      }  \n    });\n    \n  }\n});\n\n"
            type: custom_component
          - name: form
            mode: insert
            submit_route: home_free
            type: form
            query:
              name: notes_empty
              collection: notes
              find_one: false
              filter:
                _id: null
              options: {}
              params: []
            fields:
              - name: text
                title: 'Or enter a note:'
                type: string
                required: true
                input: textarea
          - name: notes
            html: "<template name=\"TEMPLATE_NAME\">\n  {{#each notes}}\n\t<div class=\"panel\" style=\"padding: 0 10px;\">\n      {{#if photo}}\n        <img src=\"{{photo}}\" alt=\"Loading image...\" style=\"margin-top: 10px; width: 100%; height: auto\">\n      {{else}}\n        <p>{{text}}</p>\n      {{/if}}\n      <p class=\"text-muted\">{{name}}, {{livestamp createdAt}}</p>\n    </div>\n  {{/each}}\n</template>"
            type: custom_component
            query:
              name: notes
              collection: notes
              find_one: false
              filter: {}
              options:
                sort:
                  createdAt: -1
              params: []
  public_zone:
    navbar_class: navbar-inverse navbar-fixed-top
    pages:
      - name: login
        template: login
      - name: register
        template: register
      - name: forgot_password
        template: forgot_password
      - name: reset_password
        template: reset_password
        route_params:
          - resetPasswordToken
    menus:
      - name: left_menu
        class: nav navbar-nav
        dest_selector: '#menu'
        items:
          - title: Home
            route: home_free
          - title: Source
            url: 'https://github.com/perak/kitchen-examples/tree/master/example-photosharing'
            target: _blank
      - name: right_menu
        class: nav navbar-nav navbar-right
        dest_selector: '#menu'
        items:
          - title: Register
            route: register
          - title: Login
            route: login
  private_zone:
    navbar_class: navbar-default navbar-fixed-top
    pages:
      - name: user_settings
        pages:
          - name: profile
            components:
              - name: edit_form
                type: form
                mode: update
                title: Edit your profile
                submit_route: user_settings.profile
                query:
                  name: current_user_data
                  collection: users
                  filter:
                    _id: Meteor.userId()
                  find_one: true
                  options: {}
                  params: []
                fields:
                  - name: profile.name
                    title: Name
                    required: true
                    type: string
                  - name: profile.email
                    title: E-mail
                    type: email
                    required: true
                  - name: profile.facebook
                    title: Facebook URL
                    type: string
                  - name: profile.google
                    title: Google+ URL
                    type: string
                  - name: profile.twitter
                    title: Twitter ID
                    type: string
                  - name: profile.website
                    title: Website URL
                    type: string
          - name: change_pass
            template: change_pass
        menus:
          - name: side_menu
            class: nav nav-stacked nav-pills
            items:
              - title: Profile
                route: user_settings.profile
              - title: Change password
                route: user_settings.change_pass
      - name: logout
        template: logout
    menus:
      - name: left_menu
        class: nav navbar-nav
        dest_selector: '#menu'
        items:
          - title: Home
            route: home_free
      - name: right_menu
        class: nav navbar-nav navbar-right
        dest_selector: '#menu'
        items:
          - title: '{{userEmail}}'
            items:
              - title: Settings
                route: user_settings
              - title: Logout
                route: logout
  packages:
    meteor:
      - 'mdg:camera'
      - 'copleykj:livestamp'

